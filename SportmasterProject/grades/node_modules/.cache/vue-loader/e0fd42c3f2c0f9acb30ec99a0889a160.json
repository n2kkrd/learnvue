{"remainingRequest":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\src\\components\\grade\\StudentChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\src\\components\\grade\\StudentChart.vue","mtime":1684146671777},{"path":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683985594686},{"path":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\node_modules\\babel-loader\\lib\\index.js","mtime":1683985595619},{"path":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683985594686},{"path":"C:\\Users\\n2kn2\\OneDrive\\Рабочий стол\\Projects\\learnvue\\SportmasterProject\\grades\\node_modules\\vue-loader\\lib\\index.js","mtime":1683985595910}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ2hhcnQgZnJvbSAnY2hhcnQuanMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCm5hbWU6ICdTdHVkZW50Q2hhcnQnLA0KZGF0YSAoKSB7DQogIHJldHVybiB7DQogICAgcGllQ2hhcnQ6IG51bGwsDQogICAgYmFyQ2hhcnQ6IG51bGwsDQogIH0NCn0sDQphc3luYyBjcmVhdGVkICgpIHsNCiAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpDQoNCn0sDQpjb21wdXRlZDogew0KICBjaGFydERhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICBjb25zdCBncmFkZUNvdW50cyA9IHt9DQogICAgY29uc3Qgc3R1ZGVudHNCeUdyYWRlID0ge30NCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5ncmFkZS5ncmFkZXMuZm9yRWFjaCgoZ3JhZGUpID0+IHsNCiAgICAgIGNvbnN0IGdyYWRlVmFsdWUgPSBncmFkZS5ncmFkZQ0KICAgICAgaWYgKCFncmFkZUNvdW50c1tncmFkZVZhbHVlXSkgew0KICAgICAgICBncmFkZUNvdW50c1tncmFkZVZhbHVlXSA9IDANCiAgICAgICAgc3R1ZGVudHNCeUdyYWRlW2dyYWRlVmFsdWVdID0gW10NCiAgICAgIH0NCiAgICAgIGdyYWRlQ291bnRzW2dyYWRlVmFsdWVdKysNCiAgICAgIHN0dWRlbnRzQnlHcmFkZVtncmFkZVZhbHVlXS5wdXNoKHRoaXMuJHN0b3JlLnN0YXRlLnN0dWRlbnQuc3R1ZGVudHMuZ2V0KGdyYWRlLnN0dWRlbnRDb2RlKSkNCiAgICB9KQ0KDQogICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGdyYWRlQ291bnRzKS5tYXAoKFtncmFkZVZhbHVlLCBjb3VudF0pID0+ICh7DQogICAgICBncmFkZVZhbHVlLA0KICAgICAgY291bnQsDQogICAgICBzdHVkZW50czogc3R1ZGVudHNCeUdyYWRlW2dyYWRlVmFsdWVdLA0KICAgIH0pKQ0KICB9LA0KICBjaGFydERhdGFBbmRPcHRpb25zOiBmdW5jdGlvbiAoKSB7DQogICAgY29uc3QgY2hhcnREYXRhID0gdGhpcy5jaGFydERhdGENCiAgICBjb25zdCBkYXRhID0gew0KICAgICAgbGFiZWxzOiBjaGFydERhdGEubWFwKChncmFkZSkgPT4gZ3JhZGUuZ3JhZGVWYWx1ZSksDQogICAgICBkYXRhc2V0czogWw0KICAgICAgICB7DQogICAgICAgICAgZGF0YTogY2hhcnREYXRhLm1hcCgoZ3JhZGUpID0+IGdyYWRlLmNvdW50KSwNCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsNCiAgICAgICAgICAgICcjRkY2Mzg0JywNCiAgICAgICAgICAgICcjMzZBMkVCJywNCiAgICAgICAgICAgICcjRkZDRTU2JywNCiAgICAgICAgICAgICcjOERGRjAwJywNCiAgICAgICAgICAgICcjRkY1NzMzJywNCiAgICAgICAgICAgICcjQzQxRTNEJywNCiAgICAgICAgICBdLA0KICAgICAgICAgIGhvdmVyQmFja2dyb3VuZENvbG9yOiBbDQogICAgICAgICAgICAnI0ZGNjM4NCcsDQogICAgICAgICAgICAnIzM2QTJFQicsDQogICAgICAgICAgICAnI0ZGQ0U1NicsDQogICAgICAgICAgICAnIzhERkYwMCcsDQogICAgICAgICAgICAnI0ZGNTczMycsDQogICAgICAgICAgICAnI0M0MUUzRCcsDQogICAgICAgICAgXSwNCiAgICAgICAgfSwNCiAgICAgIF0sDQogICAgfQ0KICAgIGNvbnN0IG9wdGlvbnMgPSB7DQogICAgICByZXNwb25zaXZlOiB0cnVlLA0KICAgICAgbWFpbnRhaW5Bc3BlY3RSYXRpbzogZmFsc2UsDQogICAgICBwbHVnaW5zOiB7DQogICAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgICBjYWxsYmFja3M6IHsNCiAgICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbiAodG9vbHRpcEl0ZW0pIHsNCiAgICAgICAgICAgICAgY29uc3QgYXJyYXkgPSBjaGFydERhdGFbdG9vbHRpcEl0ZW0uZGF0YUluZGV4XS5zdHVkZW50cy5tYXAoKHsgZnVsbE5hbWUgfSkgPT4gZnVsbE5hbWUpDQogICAgICAgICAgICAgIGFycmF5LnVuc2hpZnQodG9vbHRpcEl0ZW0ucmF3KQ0KICAgICAgICAgICAgICByZXR1cm4gYXJyYXkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB7IGRhdGEsIG9wdGlvbnMgfQ0KICB9DQp9LA0KbWV0aG9kczogew0KICBhc3luYyBsb2FkRGF0YSAoKSB7DQogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3N0dWRlbnQvZ2V0U3R1ZGVudHMnKQ0KICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdncmFkZS9nZXRDb3Vyc2VzJykNCiAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3JhZGUvZ2V0R3JhZGVzJykNCg0KICAgIHRoaXMuY3JlYXRlUGllQ2hhcnQoKQ0KICAgIHRoaXMuY3JlYXRlQmFyQ2hhcnQoKQ0KICB9LA0KDQogIGNyZWF0ZVBpZUNoYXJ0ICgpIHsNCiAgICB0aGlzLnBpZUNoYXJ0ID0gbmV3IENoYXJ0KHRoaXMuJHJlZnMucGllQ2hhcnQsIHsNCiAgICAgIHR5cGU6ICdwaWUnLA0KICAgICAgLi4udGhpcy5jaGFydERhdGFBbmRPcHRpb25zLA0KICAgIH0pDQogIH0sDQogIGNyZWF0ZUJhckNoYXJ0ICgpIHsNCiAgICBjb25zdCB7IGRhdGEsIG9wdGlvbnMgfSA9IHRoaXMuY2hhcnREYXRhQW5kT3B0aW9ucw0KICAgIG9wdGlvbnMucGx1Z2lucy5sZWdlbmQgPSB7DQogICAgICBkaXNwbGF5OiBmYWxzZQ0KICAgIH0NCiAgICB0aGlzLmJhckNoYXJ0ID0gbmV3IENoYXJ0KHRoaXMuJHJlZnMuYmFyQ2hhcnQsIHsNCiAgICAgIHR5cGU6ICdiYXInLA0KICAgICAgZGF0YSwNCiAgICAgIG9wdGlvbnMsDQogICAgfSkNCiAgfSwNCn0sDQp9DQo="},{"version":3,"sources":["StudentChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StudentChart.vue","sourceRoot":"src/components/grade","sourcesContent":["<template>\r\n  <v-container>\r\n      <v-row>\r\n          <v-col cols=\"6\">\r\n              <v-card>\r\n                  <v-card-title>Круговая диаграмма распределения оценок</v-card-title>\r\n                  <v-card-text>\r\n                      <canvas ref=\"pieChart\" width=\"400\" height=\"400\"></canvas>\r\n                  </v-card-text>\r\n              </v-card>\r\n          </v-col>\r\n          <v-col cols=\"6\">\r\n              <v-card>\r\n                  <v-card-title>Столбчатая диаграмма распределения оценок по курсам</v-card-title>\r\n                  <v-card-text>\r\n                      <canvas ref=\"barChart\" width=\"400\" height=\"400\"></canvas>\r\n                  </v-card-text>\r\n              </v-card>\r\n          </v-col>\r\n      </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport Chart from 'chart.js'\r\n\r\nexport default {\r\nname: 'StudentChart',\r\ndata () {\r\n  return {\r\n    pieChart: null,\r\n    barChart: null,\r\n  }\r\n},\r\nasync created () {\r\n  await this.loadData()\r\n\r\n},\r\ncomputed: {\r\n  chartData: function () {\r\n    const gradeCounts = {}\r\n    const studentsByGrade = {}\r\n    this.$store.state.grade.grades.forEach((grade) => {\r\n      const gradeValue = grade.grade\r\n      if (!gradeCounts[gradeValue]) {\r\n        gradeCounts[gradeValue] = 0\r\n        studentsByGrade[gradeValue] = []\r\n      }\r\n      gradeCounts[gradeValue]++\r\n      studentsByGrade[gradeValue].push(this.$store.state.student.students.get(grade.studentCode))\r\n    })\r\n\r\n    return Object.entries(gradeCounts).map(([gradeValue, count]) => ({\r\n      gradeValue,\r\n      count,\r\n      students: studentsByGrade[gradeValue],\r\n    }))\r\n  },\r\n  chartDataAndOptions: function () {\r\n    const chartData = this.chartData\r\n    const data = {\r\n      labels: chartData.map((grade) => grade.gradeValue),\r\n      datasets: [\r\n        {\r\n          data: chartData.map((grade) => grade.count),\r\n          backgroundColor: [\r\n            '#FF6384',\r\n            '#36A2EB',\r\n            '#FFCE56',\r\n            '#8DFF00',\r\n            '#FF5733',\r\n            '#C41E3D',\r\n          ],\r\n          hoverBackgroundColor: [\r\n            '#FF6384',\r\n            '#36A2EB',\r\n            '#FFCE56',\r\n            '#8DFF00',\r\n            '#FF5733',\r\n            '#C41E3D',\r\n          ],\r\n        },\r\n      ],\r\n    }\r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      plugins: {\r\n        tooltip: {\r\n          callbacks: {\r\n            label: function (tooltipItem) {\r\n              const array = chartData[tooltipItem.dataIndex].students.map(({ fullName }) => fullName)\r\n              array.unshift(tooltipItem.raw)\r\n              return array\r\n            }\r\n          },\r\n        },\r\n      }\r\n    }\r\n\r\n    return { data, options }\r\n  }\r\n},\r\nmethods: {\r\n  async loadData () {\r\n    await this.$store.dispatch('student/getStudents')\r\n    await this.$store.dispatch('grade/getCourses')\r\n    await this.$store.dispatch('grade/getGrades')\r\n\r\n    this.createPieChart()\r\n    this.createBarChart()\r\n  },\r\n\r\n  createPieChart () {\r\n    this.pieChart = new Chart(this.$refs.pieChart, {\r\n      type: 'pie',\r\n      ...this.chartDataAndOptions,\r\n    })\r\n  },\r\n  createBarChart () {\r\n    const { data, options } = this.chartDataAndOptions\r\n    options.plugins.legend = {\r\n      display: false\r\n    }\r\n    this.barChart = new Chart(this.$refs.barChart, {\r\n      type: 'bar',\r\n      data,\r\n      options,\r\n    })\r\n  },\r\n},\r\n}\r\n</script>\r\n"]}]}